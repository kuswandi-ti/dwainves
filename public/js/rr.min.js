!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r(r.s=1)}({1:function(t,e,r){t.exports=r("Kt0l")},Kt0l:function(t,e){$(document).ready((function(){t();$("#datatable_receiving_report_hdr").DataTable({destroy:!0,processing:!0,serverSide:!0,ajax:{url:"/receiving-report/list_receiving_report_hdr",dataType:"json",type:"POST"},columns:[{data:"id",name:"id",visible:!1},{data:"DT_RowIndex",name:"DT_RowIndex",orderable:!1,searchable:!1},{data:"rr_no",name:"rr_no",orderable:!0,searchable:!0},{data:"rr_date",name:"rr_date",orderable:!0,searchable:!0},{data:"rdi_no",name:"rdi_no",orderable:!0,searchable:!0},{data:"rdi_date",name:"rdi_date",orderable:!0,searchable:!0},{data:"delivery_date",name:"delivery_date",orderable:!0,searchable:!0},{data:"action",name:"action",orderable:!1,searchable:!1}],order:[["3","desc"],["2","desc"]],columnDefs:[{className:"text-center",targets:[0,1,2,3,4,5,6,7]}],autoWidth:!1,responsive:!0});function t(){$("#cbo_nomor_rdi").select2(),$("#cbo_nomor_rdi").val("0").trigger("change"),$("#tgl_rdi").val("AUTO"),$("#no_sj_vendor").val(""),$("#tgl_sj_vendor").val(moment().format(format_date_display_2)),$("#tgl_pengiriman").val(moment().format(format_date_display_2)),$("#keterangan").val(""),$("#detail_input_rr").empty()}$("#cbo_nomor_rdi").change((function(){var t=$("#cbo_nomor_rdi option:selected").attr("data-id");"0"==t?$("#tgl_rdi").val("AUTO"):$("#tgl_rdi").val(moment($("#cbo_nomor_rdi option:selected").attr("data-date")).format(format_date_display_2)),$.ajax({url:"/receiving-report/get_rdi_gr_os_detail/"+t,type:"GET",datatype:"json",beforeSend:function(){$("#detail_input_rr").LoadingOverlay("show",!0)},complete:function(){$("#detail_input_rr").LoadingOverlay("hide",!0)},success:function(e){if($("#detail_input_rr").empty(),"0"==t)return!1;var r="",n=0;$.isEmptyObject(e)?(r+='<div class="col-xs-12 col-md-2 col-lg-2 col-xl-2 text-center">',r+='<span class="text-center"><b>Tidak Ada Data</b></span>',r+="</div>"):(e.forEach((function(t){r+='<div class="row">',r+='<div class="col-xs-12 col-md-1 col-lg-1 col-xl-1">',r+='<div class="custom-control custom-checkbox text-center">',r+='<input type="checkbox" class="text-center" name="chk_select[]" value="'+n+'" checked>',r+="</div>",r+="</div>",r+='<div class="col-xs-12 col-md-2 col-lg-2 col-xl-2 text-center">',r+='<input type="text" value="'+t.Part_Number+'" id="part_number[]" name="part_number[]" class="form-control" readonly>',r+='<input type="hidden" value="'+t.SysId_VPN2+'" id="vpn_id[]" name="vpn_id[]" class="form-control">',r+='<input type="hidden" value="'+t.SysId_VPN+'" id="pn_id[]" name="pn_id[]" class="form-control">',r+="</div>",r+='<div class="col-xs-12 col-md-4 col-lg-4 col-xl-4">',r+='<input type="text" value="'+t.Part_Name+'" id="part_name[]" name="part_name[]" class="form-control" readonly>',r+="</div>",r+='<div class="col-xs-12 col-md-1 col-lg-1 col-xl-1 text-center">',r+='<input type="text" value="'+t.Unit+'" id="satuan[]" name="satuan[]" class="form-control" readonly>',r+="</div>",r+='<div class="col-xs-12 col-md-2 col-lg-2 col-xl-2">',r+='<input type="text" value="'+currencyFormat(t.Outstanding_DI)+'" id="qty_rr_input[]" name="qty_rr_input[]" class="form-control text-right only-number">',r+="</div>",r+='<div class="col-xs-12 col-md-2 col-lg-2 Outstanding_DI-xl-2">',r+='<input type="text" value="'+currencyFormat(t.Outstanding_DI)+'" id="qty_rr_max[]" name="qty_rr_max[]" class="form-control text-right" readonly>',r+="</div>",r+="</div>",r+="<hr>",n+=1})),r+='<div class="buttons">',r+='<button class="btn btn-icon icon-left btn-lg btn-primary font-weigh-bold" id="btn_proses_rr"><i class="fas fa-check"></i> Proses RR</button>',r+='<button class="btn btn-icon icon-left btn-lg btn-danger font-weigh-bold" id="btn_batal_rr"><i class="fas fa-ban"></i> Batal</button>',r+="</div>"),$("#detail_input_rr").html(r)},error:function(t,e,r){$("#detail_input_rr").LoadingOverlay("hide",!0);var n=t.status+": "+t.statusText;Swal.fire({type:"error",title:"<strong>Error</strong>",text:n})}}).always((function(){$.LoadingOverlay("hide")}))})),$("#tgl_sj_vendor").change((function(){$("#tgl_pengiriman").val($("#tgl_sj_vendor").val())})),$("#check_all").click((function(){$("input[type=checkbox]").prop("checked",$(this).prop("checked"))})),$("body").on("click","#btn_proses_rr",(function(t){t.preventDefault();var e=$("#cbo_nomor_rdi").val(),r=$("#no_sj_vendor").val();return"0"==e?(Swal.fire({type:"error",title:"<strong>Error</strong>",text:"Nomor DI belum dipilih !!!"}),$("#cbo_nomor_rdi").focus(),!1):0==r.length?(Swal.fire({type:"error",title:"<strong>Error</strong>",text:"Nomor SJ Vendor harus diisi !!!"}),$("#no_sj_vendor").focus(),!1):void swal({title:"Lanjutkan proses pembuatan RR ?",text:"Proses pembuatan RR",type:"question",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Tidak",reverseButtons:!0}).then((function(t){!0===t.value?$.ajax({type:"post",url:"/receiving-report/store_receiving_report",data:$("#form_input_rr").serialize(),beforeSend:function(){$.LoadingOverlay("show")},complete:function(){$.LoadingOverlay("hide")},success:function(t){for(var e in t)var r=t.success,n=t.message,o=t.rr_id,a=t.rr_no;if("true"==$.trim(r)){var i="/receiving-report";swal({title:"Success!",html:n+"<br>Nomor RR : <strong>"+a+"</strong><br><br>Lanjutkan ke proses print RR ?",type:"success",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Tidak",reverseButtons:!0}).then((function(t){$("#no_rr").val(a),$("#id_rr").val(o),!0===t.value?window.open("/receiving-report/print_receiving_report/"+o,"_blank"):t.dismiss,window.location.replace(i)}),(function(t){window.location.replace(i)}))}else Swal.fire({type:"error",title:"<strong>Error</strong>",html:"<u>Kemungkinan error :</u> <br>"+n})},error:function(t,e,r){var n=t.status+": "+t.statusText;Swal.fire({type:"error",title:"<strong>Error</strong>",text:n})}}).always((function(){$.LoadingOverlay("hide")})):t.dismiss}),(function(t){return!1}))})),$("body").on("click","#btn_batal_rr",(function(e){e.preventDefault(),swal({title:"Membatalkan input RR ?",text:"Data yang sudah diinput akan direset !",type:"warning",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Tidak",reverseButtons:!0}).then((function(e){!0===e.value?t():e.dismiss}),(function(t){return!1}))})),$("body").on("click","#print_rr",(function(t){$("#datatable_receiving_report_hdr").DataTable().row(this).data();var e=$(this).data("id");window.open("/receiving-report/print_receiving_report/"+e,"_blank")}))}))}});